<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–ó–∞–¥–∞–Ω–∏—è ‚Äî –î–µ—Ä–µ–≤–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤)</title>
<style>
  :root{--bg:#0f1724;--card:#0b1220;--accent:#38bdf8;--muted:#94a3b8;--glass:rgba(255,255,255,0.03)}
  html,body{height:100%;margin:0;font-family:Inter,Segoe UI,Roboto,"Helvetica Neue",Arial;background:linear-gradient(180deg,#071027 0%, #071827 100%);color:#e6eef8}
  .app{max-width:1100px;margin:28px auto;padding:20px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);box-shadow:0 6px 24px rgba(2,6,23,0.6)}
  h1{margin:0 0 12px;font-size:20px}
  .tabs{display:flex;gap:8px;margin-bottom:18px}
  .tab{padding:8px 12px;border-radius:8px;background:var(--card);cursor:pointer;color:var(--muted)}
  .tab.active{background:linear-gradient(90deg,var(--accent),#7dd3fc);color:#022}
  .panel{display:none;padding:12px;border-radius:8px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent)}
  .panel.active{display:block}
  /* Tree */
  .tree{padding:12px}
  .node{cursor:pointer;padding:6px 10px;border-radius:6px;background:var(--glass);margin:6px 0;display:flex;align-items:center;gap:10px}
  .children{margin-left:20px;display:none}
  .node.open + .children{display:block}
  .badge{background:rgba(255,255,255,0.04);padding:4px 8px;border-radius:6px;font-size:12px}
  /* Flowchart */
  .flow{display:flex;gap:12px;flex-wrap:wrap}
  .block{min-width:180px;padding:12px;border-radius:8px;background:rgba(2,6,23,0.6);box-shadow:inset 0 -2px 6px rgba(0,0,0,0.4);cursor:pointer}
  .desc{margin-top:10px;padding:10px;background:rgba(255,255,255,0.02);border-radius:6px;color:var(--muted)}
  /* Nonfunctional */
  .nf-wrap{display:flex;gap:20px;align-items:center}
  svg{width:100%;height:220px}
  .nf-item{padding:10px;border-radius:8px;background:rgba(255,255,255,0.03);min-width:140px;text-align:center}
  .nf-item.highlight{outline:3px solid rgba(56,189,248,0.16);transform:scale(1.02)}
  /* UI mockup */
  .mock{display:flex;justify-content:center}
  .window{width:520px;padding:12px;border-radius:12px;background:linear-gradient(180deg,#071226, #072033);box-shadow:0 8px 30px rgba(1,10,20,0.6)}
  .win-top{display:flex;gap:8px;align-items:center;padding:8px}
  .dot{width:12px;height:12px;border-radius:50%;background:#ff6b6b}
  .form-row{display:flex;gap:8px;margin:10px 0}
  input,select,textarea{flex:1;padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.04);background:rgba(255,255,255,0.02);color:inherit}
  button{padding:8px 12px;border-radius:8px;border:none;background:var(--accent);cursor:pointer}
  /* ER diagram */
  .er-canvas{position:relative;height:360px;border-radius:8px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);overflow:hidden}
  .entity{position:absolute;padding:10px;border-radius:8px;background:rgba(255,255,255,0.03);min-width:140px;cursor:grab}
  .entity h3{margin:0 0 6px;font-size:14px}
  .field{font-size:13px;color:var(--muted)}
  /* table */
  table{width:100%;border-collapse:collapse;margin-top:12px}
  td,th{padding:8px;border:1px solid rgba(255,255,255,0.04)}
  td[contenteditable]{background:rgba(255,255,255,0.02);cursor:text}
  .hint{font-size:12px;color:var(--muted);margin-top:8px}
</style>
</head>
<body>
<div class="app">
  <h1>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤: –î–µ—Ä–µ–≤–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∏ —Å–æ–ø—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∑–∞–¥–∞–Ω–∏—è</h1>
  <div class="tabs" role="tablist">
    <div class="tab active" data-panel="tree">1. –î–µ—Ä–µ–≤–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π</div>
    <div class="tab" data-panel="flow">2. –§—É–Ω–∫—Ü–∏–∏ (–±–ª–æ–∫-—Å—Ö–µ–º–∞)</div>
    <div class="tab" data-panel="nf">3. –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ</div>
    <div class="tab" data-panel="ui">4. –ú–∞–∫–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</div>
    <div class="tab" data-panel="er">5. ER-–¥–∏–∞–≥—Ä–∞–º–º–∞</div>
  </div>

  <div id="tree" class="panel active">
    <div class="tree">
      <div class="node" data-toggle>üì¶ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ü–û <span class="badge">—Ü–µ–Ω—Ç—Ä</span></div>
      <div class="children">
        <div class="node" data-toggle>‚öôÔ∏è –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ</div>
        <div class="children">
          <div class="node">‚Äî –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</div>
          <div class="node">‚Äî –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</div>
          <div class="node">‚Äî –ü–æ–∏—Å–∫ –¥–∞–Ω–Ω—ã—Ö</div>
          <div class="node">‚Äî –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤</div>
        </div>
        <div class="node" data-toggle>üîí –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ</div>
        <div class="children">
          <div class="node">‚Äî –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</div>
          <div class="node">‚Äî –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</div>
          <div class="node">‚Äî –£–¥–æ–±—Å—Ç–≤–æ (UX)</div>
          <div class="node">‚Äî –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å</div>
        </div>
        <div class="node" data-toggle>üíª –°–∏—Å—Ç–µ–º–Ω—ã–µ</div>
        <div class="children">
          <div class="node">‚Äî –û–° –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è</div>
          <div class="node">‚Äî –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è</div>
          <div class="node">‚Äî –°–µ—Ç–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è</div>
        </div>
      </div>
    </div>
    <p class="hint">–ù–∞–∂–º–∏ –Ω–∞ —É–∑–µ–ª, —á—Ç–æ–±—ã —Ä–∞—Å–∫—Ä—ã—Ç—å/—Å–∫—Ä—ã—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã. –≠—Ç–æ –¥–µ—Ä–µ–≤–æ –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ —É–∑–ª–∞–º–∏ ‚Äî –∫–æ–¥—ã –ª–µ–≥–∫–æ —á–∏—Ç–∞–µ–º—ã.</p>
  </div>

  <div id="flow" class="panel">
    <div class="flow">
      <div class="block" data-id="reg">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è<div class="desc" data-desc>–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç ‚Äî –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã, –≤–∞–ª–∏–¥–∞—Ü–∏—è, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î.</div></div>
      <div class="block" data-id="auth">–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è<div class="desc" data-desc>–õ–æ–≥–∏–Ω –ø–æ –ø–æ—á—Ç–µ/–ø–∞—Ä–æ–ª—é, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è, —Ç–æ–∫–µ–Ω—ã —Å–µ–∞–Ω—Å–∞.</div></div>
      <div class="block" data-id="search">–ü–æ–∏—Å–∫ –¥–∞–Ω–Ω—ã—Ö<div class="desc" data-desc>–§–∏–ª—å—Ç—Ä—ã, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, –ø–∞–≥–∏–Ω–∞—Ü–∏—è, –ø–æ–¥—Å–≤–µ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.</div></div>
      <div class="block" data-id="export">–≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤<div class="desc" data-desc>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF/CSV, –≤—ã–±–æ—Ä –ø–æ–ª–µ–π, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–∞.</div></div>
    </div>
    <p class="hint">–ö–ª–∏–∫–Ω–∏ –Ω–∞ –±–ª–æ–∫ ‚Äî –ø–æ—è–≤–∏—Ç—Å—è –æ–ø–∏—Å–∞–Ω–∏–µ. –ë–ª–æ–∫–∏ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏—Ç—å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ–º (drag & drop).</p>
  </div>

  <div id="nf" class="panel">
    <div class="nf-wrap">
      <div style="width:320px">
        <svg viewBox="0 0 600 220" preserveAspectRatio="xMidYMid meet">
          <defs>
            <marker id="arrow" markerWidth="10" markerHeight="10" refX="6" refY="5" orient="auto">
              <path d="M0,0 L10,5 L0,10 z" fill="#7dd3fc" />
            </marker>
          </defs>
          <text x="20" y="22" fill="#cfe9fb" font-size="14">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞—á–µ—Å—Ç–≤–∞</text>
          <rect x="20" y="34" width="120" height="40" rx="8" fill="#03202b" stroke="#11313f"></rect>
          <text x="30" y="59" fill="#9ed9f6">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</text>

          <rect x="160" y="34" width="100" height="40" rx="8" fill="#03202b"></rect>
          <text x="170" y="59" fill="#9ed9f6">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</text>

          <rect x="280" y="34" width="80" height="40" rx="8" fill="#03202b"></rect>
          <text x="290" y="59" fill="#9ed9f6">–£–¥–æ–±—Å—Ç–≤–æ</text>

          <rect x="380" y="34" width="120" height="40" rx="8" fill="#03202b"></rect>
          <text x="390" y="59" fill="#9ed9f6">–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å</text>

          <line x1="80" y1="74" x2="80" y2="130" stroke="#7dd3fc" stroke-width="1.6" marker-end="url(#arrow)"></line>
          <line x1="210" y1="74" x2="210" y2="130" stroke="#7dd3fc" stroke-width="1.6" marker-end="url(#arrow)"></line>
          <line x1="320" y1="74" x2="320" y2="130" stroke="#7dd3fc" stroke-width="1.6" marker-end="url(#arrow)"></line>
          <line x1="440" y1="74" x2="440" y2="130" stroke="#7dd3fc" stroke-width="1.6" marker-end="url(#arrow)"></line>

          <text x="20" y="150" fill="#cfe9fb">–í–ª–∏—è–µ—Ç –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç ‚Üí</text>
          <line x1="200" y1="145" x2="540" y2="145" stroke="#94a3b8" stroke-dasharray="4 4"></line>

          <text x="20" y="178" fill="#cfe9fb">–í–ª–∏—è–µ—Ç –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã ‚Üí</text>
          <line x1="230" y1="173" x2="540" y2="173" stroke="#94a3b8" stroke-dasharray="4 4"></line>
        </svg>
      </div>
      <div style="display:flex;flex-direction:column;gap:10px">
        <div class="nf-item" data-key="perf">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</div>
        <div class="nf-item" data-key="sec">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</div>
        <div class="nf-item" data-key="ux">–£–¥–æ–±—Å—Ç–≤–æ</div>
        <div class="nf-item" data-key="compat">–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å</div>
      </div>
    </div>
    <p class="hint">–ö–ª–∏–∫ –ø–æ —ç–ª–µ–º–µ–Ω—Ç—É –≤—ã–¥–µ–ª–∏—Ç –µ–≥–æ –∏ –ø–æ–∫–∞–∂–µ—Ç –∑–æ–Ω—ã –≤–ª–∏—è–Ω–∏—è.</p>
  </div>

  <div id="ui" class="panel">
    <div class="mock">
      <div class="window">
        <div class="win-top"><div class="dot"></div><div class="dot" style="background:#ffd166"></div><div class="dot" style="background:#06d6a0"></div><strong style="margin-left:8px;color:var(--muted)">–ü—Ä–æ—Ç–æ—Ç–∏–ø ‚Äî –ì–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ</strong></div>
        <div style="padding:8px">
          <div class="form-row"><input placeholder="–ü–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ"/></div>
          <div class="form-row"><input placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"/><input placeholder="Email"/></div>
          <div class="form-row"><select><option>–§–∏–ª—å—Ç—Ä: –≤—Å–µ</option><option>–ê–∫—Ç–∏–≤–Ω—ã–µ</option></select><button>–ü–æ–∏—Å–∫</button></div>
          <div style="margin-top:8px;padding:8px;border-radius:8px;background:rgba(255,255,255,0.02)">–û–±–ª–∞—Å—Ç—å –≤—ã–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö ‚Äî —Ç–∞–±–ª–∏—Ü–∞ –∏–ª–∏ —Å–ø–∏—Å–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</div>
          <div style="display:flex;gap:8px;margin-top:8px"><button>–°–æ–∑–¥–∞—Ç—å</button><button>–≠–∫—Å–ø–æ—Ä—Ç</button><button>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button></div>
        </div>
      </div>
    </div>
    <p class="hint">–≠—Ç–æ –º–∞–∫–µ—Ç. –ü–µ—Ä–µ–∏–º–µ–Ω—É–π –ø–æ–ª—è –≤ –∫–æ–¥–µ, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ ‚Äî –≤—Å—ë –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ.</p>
  </div>

  <div id="er" class="panel">
    <div class="er-canvas" id="erCanvas">
      <svg id="erSvg" style="position:absolute;inset:0;pointer-events:none"></svg>
      <div class="entity" id="entUsers" style="left:36px;top:40px">
        <h3>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
        <div class="field">id (PK)</div>
        <div class="field">name</div>
        <div class="field">email</div>
      </div>
      <div class="entity" id="entOrders" style="left:220px;top:160px">
        <h3>–ó–∞–∫–∞–∑—ã</h3>
        <div class="field">id (PK)</div>
        <div class="field">user_id (FK)</div>
        <div class="field">date</div>
      </div>
      <div class="entity" id="entProducts" style="left:420px;top:40px">
        <h3>–¢–æ–≤–∞—Ä—ã</h3>
        <div class="field">id (PK)</div>
        <div class="field">name</div>
        <div class="field">price</div>
      </div>
    </div>
    <div style="margin-top:12px">
      <strong>–¢–∞–±–ª–∏—Ü–∞ (–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å —è—á–µ–π–∫–∞–º–∏)</strong>
      <table>
        <thead><tr><th>id</th><th>name</th><th>qty</th></tr></thead>
        <tbody>
          <tr><td>1</td><td contenteditable>–ü—Ä–∏–º–µ—Ä —Ç–æ–≤–∞—Ä–∞ A</td><td contenteditable>10</td></tr>
          <tr><td>2</td><td contenteditable>–ü—Ä–∏–º–µ—Ä —Ç–æ–≤–∞—Ä–∞ B</td><td contenteditable>5</td></tr>
        </tbody>
      </table>
      <p class="hint">–î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –≤ —è—á–µ–π–∫–µ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ DOM (–ª–æ–∫–∞–ª—å–Ω–æ).</p>
    </div>
  </div>

</div>
<script>
// Tabs
document.querySelectorAll('.tab').forEach(t=>t.addEventListener('click',()=>{
  document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
  document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
  t.classList.add('active');
  document.getElementById(t.dataset.panel).classList.add('active');
}));

// Tree toggle
document.querySelectorAll('[data-toggle]').forEach(n=>{
  n.addEventListener('click', ()=>{
    n.classList.toggle('open');
  });
});

// Flowchart description toggle & drag reorder
let dragged=null;
document.querySelectorAll('.block').forEach(b=>{
  b.addEventListener('click',()=>{
    const d=b.querySelector('[data-desc]');
    d.style.display = d.style.display === 'block' ? 'none' : 'block';
  });
  b.draggable=true;
  b.addEventListener('dragstart',e=>{dragged=b; setTimeout(()=>b.style.opacity='0.4',0)});
  b.addEventListener('dragend',e=>{dragged=null; b.style.opacity='1'});
});
const flow = document.querySelector('.flow');
flow.addEventListener('dragover',e=>{e.preventDefault(); const after = getDragAfterElement(flow, e.clientY); if(after==null) flow.appendChild(dragged); else flow.insertBefore(dragged, after);});
function getDragAfterElement(container,y){ const draggableElements=[...container.querySelectorAll('.block:not(.dragging)')]; return draggableElements.reduce((closest,child)=>{const box=child.getBoundingClientRect(); const offset = y - box.top - box.height/2; if(offset<0 && offset>closest.offset) return {offset:offset,element:child}; else return closest;},{offset: Number.NEGATIVE_INFINITY}).element;}

// NF highlight
document.querySelectorAll('.nf-item').forEach(i=>i.addEventListener('click', ()=>{
  document.querySelectorAll('.nf-item').forEach(x=>x.classList.remove('highlight'));
  i.classList.add('highlight');
}));

// ER drag & svg connectors
const svg = document.getElementById('erSvg');
const entUsers = document.getElementById('entUsers');
const entOrders = document.getElementById('entOrders');
const entProducts = document.getElementById('entProducts');
const entities = [entUsers, entOrders, entProducts];
let dragEl=null, offsetX=0, offsetY=0;
entities.forEach(el=>{
  el.addEventListener('mousedown', e=>{
    dragEl=el; offsetX = e.clientX - el.getBoundingClientRect().left; offsetY = e.clientY - el.getBoundingClientRect().top; el.style.cursor='grabbing';
  });
});
document.addEventListener('mousemove', e=>{
  if(!dragEl) return; const parent = document.getElementById('erCanvas'); const rect = parent.getBoundingClientRect(); let x = e.clientX - rect.left - offsetX; let y = e.clientY - rect.top - offsetY; x = Math.max(8, Math.min(rect.width - 160, x)); y = Math.max(8, Math.min(rect.height - 80, y)); dragEl.style.left = x + 'px'; dragEl.style.top = y + 'px'; updateLines();});
document.addEventListener('mouseup', ()=>{ if(dragEl) dragEl.style.cursor='grab'; dragEl=null;});

function updateLines(){ svg.innerHTML=''; connect(entUsers, entOrders, '1..*'); connect(entOrders, entProducts, '1..*'); }
function connect(a,b,label){ const pa=a.getBoundingClientRect(); const pb=b.getBoundingClientRect(); const parent = document.getElementById('erCanvas').getBoundingClientRect(); const ax = pa.left - parent.left + pa.width/2; const ay = pa.top - parent.top + pa.height/2; const bx = pb.left - parent.left + pb.width/2; const by = pb.top - parent.top + pb.height/2; const path = document.createElementNS('http://www.w3.org/2000/svg','path'); path.setAttribute('d', `M ${ax} ${ay} L ${bx} ${by}`); path.setAttribute('stroke','#7dd3fc'); path.setAttribute('stroke-width','2'); path.setAttribute('fill','none'); path.setAttribute('marker-end','url(#earr)'); svg.appendChild(path);
  const txt = document.createElementNS('http://www.w3.org/2000/svg','text'); txt.setAttribute('x',(ax+bx)/2); txt.setAttribute('y',(ay+by)/2 - 8); txt.setAttribute('fill','#cfe9fb'); txt.textContent = label; svg.appendChild(txt);
}
// add marker
const defs = document.createElementNS('http://www.w3.org/2000/svg','defs'); defs.innerHTML = `<marker id="earr" markerWidth="10" markerHeight="10" refX="8" refY="5" orient="auto"><path d="M0,0 L10,5 L0,10 z" fill="#7dd3fc"/></marker>`; svg.appendChild(defs);
updateLines();

// Make table cells editable (already contenteditable) ‚Äî attach a simple save to localStorage for demo
document.querySelectorAll('td[contenteditable]').forEach((td,idx)=>{
  td.addEventListener('blur', ()=>{ localStorage.setItem('cell_'+idx, td.textContent); });
  const val = localStorage.getItem('cell_'+idx); if(val) td.textContent = val;
});

</script>
</body>
</html>
